services:
  # 1) Телеграм-бот (работает через long polling)
  - type: worker
    name: white-star-bot
    env: python
    plan: free
    repo: https://github.com/ik6902833-lgtm/white-star
    branch: main
    autoDeploy: true
    buildCommand: "pip install -r requirements.txt"
    startCommand: "python bot.py"

  # 2) Веб-сайт проверки СНГ (FastAPI + Uvicorn)
  - type: web
    name: white-star-cis-check
    env: python
    plan: free
    repo: https://github.com/ik6902833-lgtm/white-star
    branch: main
    autoDeploy: true
    buildCommand: "pip install -r cis_webapp/requirements.txt"
    startCommand: "uvicorn cis_webapp.main:app --host 0.0.0.0 --port $PORT"
